@page
@model VSMS.Web.Pages.Admin.Calendar.GenerateModel
@{
    ViewData["Title"] = "Generate Month";
    Layout = "_AdminLayout";
}

<h2>Generate @Model.MonthYear</h2>

@if (Model.AlreadyGenerated)
{
    <div class="alert alert-warning">
        <strong>Shifts already exist for this month.</strong>
        <p>@Model.ExistingShiftsCount shifts have already been generated.</p>
        <a href="/admin/calendar?month=@Model.Month&year=@Model.Year" class="btn btn-secondary">View Calendar</a>
    </div>
}
else
{
    <p>This will create shifts for @Model.MonthYear based on the master schedule template.</p>

    <div class="card mb-4">
        <div class="card-header">Preview</div>
        <div class="card-body">
            <p><strong>Days in month:</strong> @Model.DaysInMonth</p>
            <p><strong>Shifts to create:</strong> @Model.ShiftsToCreate</p>
            <p><strong>With default assignments:</strong> @Model.ShiftsWithDefaults</p>
        </div>
    </div>

    <form method="post">
        <input type="hidden" name="month" value="@Model.Month" />
        <input type="hidden" name="year" value="@Model.Year" />
        <button type="submit" class="btn btn-primary">Generate Shifts</button>
        <a href="/admin/calendar?month=@Model.Month&year=@Model.Year" class="btn btn-outline-secondary">Cancel</a>
    </form>
}
